export default function validateArgs(argsStr) {
    let pos
    const format = (err, pos) => `${err} at char ${pos - 1}\n${argsStr.substr(1)}\n${' '.repeat(pos - 1)}^`

    argsStr = " " + argsStr
    
    //mismatched double-quotes
    if((argsStr.split(`"`).length - 1)%2 == 1)
        return format("Unclosed double-quote character started", Array.from(argsStr).findLastIndex(ch => ch === `"`))
    
    //-abc:
    else if(pos = argsStr.match(/[^-]-[^-: ][^-: ]+:/)?.index)
        return format("Illegal use of value with cluster of optional flags", pos + 1)

    //-a-
    else if(pos = argsStr.match(/-[^ ]+-/)?.index)
        return format("Flag not properly closed", pos)
    
    //:a
    else if(pos = argsStr.match(/ :/))
        return format("Use of reserved character ':' to start argument", pos + 1)
    
    //console.log("Arg-string has been verified")
    return true
}